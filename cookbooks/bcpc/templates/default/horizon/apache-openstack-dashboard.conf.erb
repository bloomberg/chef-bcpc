Listen <%=node['bcpc']['management']['ip']%>:9999

<VirtualHost <%=node['bcpc']['management']['ip']%>:9999>
  ServerName "openstack.<%=node['bcpc']['cluster_domain']%>"

  WSGIScriptAlias /horizon /usr/share/openstack-dashboard/openstack_dashboard/wsgi/django.wsgi process-group=horizon
  WSGIDaemonProcess horizon user=horizon group=horizon processes=3 threads=10 display-name=%{GROUP}
  WSGIProcessGroup horizon
  WSGIApplicationGroup %{GLOBAL}

  Alias /static /var/lib/openstack-dashboard/static/
  Alias /horizon/static /var/lib/openstack-dashboard/static/

  RewriteEngine  on

  # make sure there is a trailing / so django will build a proper next query
  # param on login
  #
  RewriteRule "^/horizon$" "/horizon/" [PT]

  # this rewrite rule is here to properly link certain fonts to their correct
  # location because they were not referenced correctly in various css files
  #
  RewriteRule "^/horizon/static/horizon/lib/roboto_fontface/fonts/Roboto/(.+)"  "/horizon/static/horizon/lib/roboto_fontface/fonts/roboto/$1" [PT]

  <Directory /usr/share/openstack-dashboard/openstack_dashboard/wsgi>
    Require all granted
  </Directory>

  <Directory /var/lib/openstack-dashboard/static>
    Require all granted
  </Directory>
</VirtualHost>
