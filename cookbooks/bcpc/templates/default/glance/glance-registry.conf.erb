################################################
#
#              Generated by Chef
#
################################################

[DEFAULT]
debug = <%= node['bcpc']['glance']['debug'] %>
bind_host = <%=node['bcpc']['management']['ip']%>
bind_port = 9191
log_file = /var/log/glance/registry.log
backlog = 4096
workers = <%= node['bcpc']['glance']['workers'] %>
api_limit_max = 1000
limit_param_default = 25
admin_role = <%=node['bcpc']['keystone']['admin_role']%>

[database]
connection = mysql+pymysql://<%=get_config('glance-db-user')%>:<%=get_config('glance-db-password')%>@<%=node['bcpc']['mysql-head']['service_hostname']%>/<%=node['bcpc']['dbname']['glance']%>
max_pool_size=<%= node['bcpc']['glance']['database']['max_pool_size'] %>
max_overflow=<%= node['bcpc']['glance']['database']['max_overflow'] %>


[keystone_authtoken]
auth_uri = <%=node['bcpc']['protocol']['keystone']%>://openstack.<%=node['bcpc']['cluster_domain']%>:5000/v2.0/
auth_url = <%=node['bcpc']['protocol']['keystone']%>://openstack.<%=node['bcpc']['cluster_domain']%>:35357
memcached_servers = <%= @servers.map{|x| x['bcpc']['management']['ip'] + ":11211"}.join(',') %>
auth_type = password
project_domain_name = Default
user_domain_name = Default
project_name = service
username = <%= get_config('glance-os-user') %>
password = <%= get_config('glance-os-password') %>

[paste_deploy]
flavor = keystone
