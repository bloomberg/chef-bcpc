[DEFAULT]
debug = false
core_plugin = calico
bind_host = <%= node['bcpc']['management']['ip'] %>
auth_strategy = keystone
transport_url = rabbit://<%= @servers.map{|x| 'guest:' + get_config('rabbitmq-password') + '@' + x['bcpc']['management']['ip'] + ":5672"}.join(',') %>

[agent]
root_helper = sudo /usr/bin/neutron-rootwrap /etc/neutron/rootwrap.conf

[database]
connection = mysql+pymysql://<%= get_config('neutron-db-user') %>:<%= get_config('neutron-db-password') %>@<%= node['bcpc']['mysql-head']['service_hostname'] %>/<%= node['bcpc']['dbname']['neutron'] %>

[keystone_authtoken]
auth_uri = <%=node['bcpc']['protocol']['keystone']%>://openstack.<%=node['bcpc']['cluster_domain']%>:5000
auth_url = <%=node['bcpc']['protocol']['keystone']%>://openstack.<%=node['bcpc']['cluster_domain']%>:35357
memcached_servers = <%= @servers.map{|x| x['bcpc']['management']['ip'] + ":11211"}.join(',') %>
auth_type = password
project_domain_name = Default
user_domain_name = Default
project_name = service
username = <%= get_config('neutron-os-user') %>
password = <%= get_config('neutron-os-password') %>


[nova]
auth_url = <%=node['bcpc']['protocol']['keystone']%>://openstack.<%=node['bcpc']['cluster_domain']%>:35357
auth_type = password
project_domain_name = Default
user_domain_name = Default
region_name = <%= node['bcpc']['region_name'] %>
project_name = service
username = <%= get_config('nova-os-user') %>
password = <%= get_config('nova-os-password') %>


[oslo_concurrency]
lock_path = $state_path/lock
