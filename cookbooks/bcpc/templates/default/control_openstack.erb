#!/bin/sh
################################################
#
#              Generated by Chef
#
################################################

if [ -z $1 ]; then
  echo 'start/stop/restart command required' >&2
  exit 1
fi

<% if @servers.include?(node) -%>
echo
echo "################################"
echo "# HEAD NODE SERVICES"
for i in apache2 \
         cinder-scheduler \
         cinder-volume \
         glance-api \
         glance-registry \
         neutron-server \
         nova-api \
         nova-conductor \
         nova-consoleauth \
         nova-novncproxy \
         nova-scheduler
do
    systemctl $1 $i
done
<% else-%>
echo
echo "################################"
echo "# WORK NODE SERVICES"
for i in nova-api-metadata \
         nova-compute \
         nova-novncproxy \
         neutron-metadata-agent \
         calico-dhcp-agent
do
    systemctl $1 $i
done
<%- end -%>
