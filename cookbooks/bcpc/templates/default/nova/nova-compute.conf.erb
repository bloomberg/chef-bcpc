# for an overview of all the available configuration options for nova@pike
# go to: https://docs.openstack.org/nova/pike/configuration/config.html
#
[DEFAULT]
compute_driver = libvirt.LibvirtDriver


[libvirt]
virt_type = <%= node['bcpc']['virt_type'] %>
images_type = rbd
images_rbd_pool = <%= node['bcpc']['ceph']['vms']['name'] %>
images_rbd_ceph_conf = /etc/ceph/ceph.conf
rbd_user = cinder
rbd_secret_uuid = <%= get_config('libvirt-secret-uuid') %>
disk_cachemodes = "network=writeback"
hw_disk_discard = unmap
<% if node['bcpc']['nova']['cpu_config']['cpu_mode'] %>
cpu_mode = <%= node['bcpc']['nova']['cpu_config']['cpu_mode'] %>
<% end %>
<% if node['bcpc']['nova']['cpu_config']['cpu_model'] %>
cpu_model = <%= node['bcpc']['nova']['cpu_config']['cpu_model'] %>
<% end %>
